# –ù–ò–® –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ - Backend API

Go backend –¥–ª—è MVP —Å–æ—Ü–∏–∞–ª—å–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã —à–∫–æ–ª—å–Ω–∏–∫–æ–≤ —Å–µ—Ç–∏ –ù–ò–®.

## üöÄ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Go 1.21+** - –æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫
- **Gin** - HTTP –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **GORM** - ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- **JWT** - –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **SQLite/PostgreSQL** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **bcrypt** - —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
cd backend
go mod download
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª –ø–æ–¥ –≤–∞—à–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```

### 3. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
go run main.go

# –ò–ª–∏ —Å–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
go build -o nis-platform
./nis-platform
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ `http://localhost:8080`

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### SQLite (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Ñ–∞–π–ª `nis_platform.db` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞.

### PostgreSQL
–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤ `.env`:
```env
DB_TYPE=postgres
DATABASE_URL=postgres://username:password@localhost:5432/nis_platform
```

### –ê–≤—Ç–æ–º–∏–≥—Ä–∞—Ü–∏—è
–í—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–µ—Ä–∞.

## üîê API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `POST /api/auth/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `POST /api/auth/login` - –í—Ö–æ–¥
- `POST /api/auth/refresh` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- `GET /api/profile` - –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `PUT /api/profile` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
- `GET /api/leaderboard` - –†–µ–π—Ç–∏–Ω–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –û–±—ä—è–≤–ª–µ–Ω–∏—è
- `GET /api/announcements` - –°–ø–∏—Å–æ–∫ –æ–±—ä—è–≤–ª–µ–Ω–∏–π
- `POST /api/announcements` - –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- `GET /api/announcements/:id` - –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- `PUT /api/announcements/:id` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- `DELETE /api/announcements/:id` - –£–¥–∞–ª–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- `POST /api/announcements/:id/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ

### –°–æ–æ–±—â–µ—Å—Ç–≤–∞
- `GET /api/communities` - –°–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ—Å—Ç–≤
- `POST /api/communities` - –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞
- `GET /api/communities/:id` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞
- `PUT /api/communities/:id` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞
- `DELETE /api/communities/:id` - –£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞
- `POST /api/communities/:id/join` - –í—Å—Ç—É–ø–ª–µ–Ω–∏–µ –≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ
- `DELETE /api/communities/:id/leave` - –í—ã—Ö–æ–¥ –∏–∑ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞

### –£—á–µ–±–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
- `GET /api/materials` - –°–ø–∏—Å–æ–∫ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- `POST /api/materials` - –ó–∞–≥—Ä—É–∑–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–∞
- `GET /api/materials/:id` - –ü–æ–ª—É—á–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞
- `PUT /api/materials/:id` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞
- `DELETE /api/materials/:id` - –£–¥–∞–ª–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞
- `POST /api/materials/:id/vote` - –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –∑–∞ –º–∞—Ç–µ—Ä–∏–∞–ª

### –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- `GET /api/comments/:type/:id` - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –æ–±—ä–µ–∫—Ç—É
- `POST /api/comments` - –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
- `DELETE /api/comments/:id` - –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
backend/
‚îú‚îÄ‚îÄ main.go                 # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ go.mod                  # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Go
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ database.go         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ë–î
‚îú‚îÄ‚îÄ models/                 # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ user.go
‚îÇ   ‚îú‚îÄ‚îÄ announcement.go
‚îÇ   ‚îú‚îÄ‚îÄ community.go
‚îÇ   ‚îú‚îÄ‚îÄ study_material.go
‚îÇ   ‚îî‚îÄ‚îÄ comment.go
‚îú‚îÄ‚îÄ handlers/               # HTTP –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ auth.go
‚îÇ   ‚îú‚îÄ‚îÄ announcement.go
‚îÇ   ‚îú‚îÄ‚îÄ community.go
‚îÇ   ‚îú‚îÄ‚îÄ material.go
‚îÇ   ‚îî‚îÄ‚îÄ user.go
‚îú‚îÄ‚îÄ middleware/             # Middleware
‚îÇ   ‚îî‚îÄ‚îÄ auth.go
‚îî‚îÄ‚îÄ uploads/               # –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
```

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥–µ–ª–∏

### User (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
- –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (email, –∏–º—è, —à–∫–æ–ª–∞, –∫–ª–∞—Å—Å)
- –°–∏—Å—Ç–µ–º–∞ –æ—á–∫–æ–≤ –∏ —Ä–µ–π—Ç–∏–Ω–≥–∞
- –†–æ–ª–∏ (student, moderator, admin)

### Announcement (–û–±—ä—è–≤–ª–µ–Ω–∏–µ)
- –ù–æ–≤–æ—Å—Ç–∏ –∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ (school, network, event)
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è

### Community (–°–æ–æ–±—â–µ—Å—Ç–≤–æ)
- –ö–ª—É–±—ã –ø–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º
- –°–∏—Å—Ç–µ–º–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤
- –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ/–ø—É–±–ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞

### StudyMaterial (–£—á–µ–±–Ω—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª)
- –ö–æ–Ω—Å–ø–µ–∫—Ç—ã –∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
- –°–∏—Å—Ç–µ–º–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø—Ä–µ–¥–º–µ—Ç–∞–º –∏ –∫–ª–∞—Å—Å–∞–º

### Comment (–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π)
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –ª—é–±—ã–º –æ–±—ä–µ–∫—Ç–∞–º
- –í–ª–æ–∂–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
- –ú–æ–¥–µ—Ä–∞—Ü–∏—è

## üîí –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è JWT —Ç–æ–∫–µ–Ω—ã:
- **Access Token** - 15 –º–∏–Ω—É—Ç
- **Refresh Token** - 7 –¥–Ω–µ–π

–ó–∞–≥–æ–ª–æ–≤–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏: `Authorization: Bearer <token>`

## üéÆ –°–∏—Å—Ç–µ–º–∞ –æ—á–∫–æ–≤

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç –æ—á–∫–∏ –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è: +10 –æ—á–∫–æ–≤
- –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è: +5 –æ—á–∫–æ–≤
- –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞: +10 –æ—á–∫–æ–≤
- –ó–∞–≥—Ä—É–∑–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–∞: +5 –æ—á–∫–æ–≤
- –í—Å—Ç—É–ø–ª–µ–Ω–∏–µ –≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ: +2 –æ—á–∫–∞
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ: +3 –æ—á–∫–∞
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: +1 –æ—á–∫–æ
- –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–∞: +1 –æ—á–∫–æ (–∞–≤—Ç–æ—Ä—É)

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ü–∞—Ä–æ–ª–∏ —Ö–µ—à–∏—Ä—É—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é bcrypt
- JWT —Ç–æ–∫–µ–Ω—ã —Å –∫–æ—Ä–æ—Ç–∫–∏–º –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏
- CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö

## üöÄ –î–µ–ø–ª–æ–π

### Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```dockerfile
FROM golang:1.21-alpine AS builder
WORKDIR /app
COPY go.mod go.sum ./
RUN go mod download
COPY . .
RUN go build -o main .

FROM alpine:latest
RUN apk --no-cache add ca-certificates
WORKDIR /root/
COPY --from=builder /app/main .
COPY --from=builder /app/.env .
CMD ["./main"]
```

### –û–±—ã—á–Ω—ã–π –¥–µ–ø–ª–æ–π

```bash
# –°–±–æ—Ä–∫–∞
go build -o nis-platform

# –ó–∞–ø—É—Å–∫
./nis-platform
```

## üìù –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```env
DB_TYPE=sqlite                    # sqlite –∏–ª–∏ postgres
SQLITE_PATH=./nis_platform.db     # –ø—É—Ç—å –∫ SQLite —Ñ–∞–π–ª—É
DATABASE_URL=postgres://...       # —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL
JWT_SECRET=your-secret-key        # —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è JWT
PORT=8080                         # –ø–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞
GIN_MODE=release                  # —Ä–µ–∂–∏–º Gin (debug/release)
CORS_ORIGINS=http://localhost:3000 # —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ CORS origins
```

## ü§ù –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º

API –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º —Å React —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º. –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç JSON –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç CORS –¥–ª—è –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞:

```javascript
// –õ–æ–≥–∏–Ω
const response = await fetch('http://localhost:8080/api/auth/login', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    email: 'user@example.com',
    password: 'password123'
  })
});

const data = await response.json();
localStorage.setItem('access_token', data.access_token);

// –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å
const announcements = await fetch('http://localhost:8080/api/announcements', {
  headers: {
    'Authorization': `Bearer ${localStorage.getItem('access_token')}`
  }
});
```